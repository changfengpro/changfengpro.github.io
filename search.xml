<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>GDB调试步骤与常用命令</title>
      <link href="/2026/02/01/GDB%E8%B0%83%E8%AF%95%E6%AD%A5%E9%AA%A4%E4%B8%8E%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2026/02/01/GDB%E8%B0%83%E8%AF%95%E6%AD%A5%E9%AA%A4%E4%B8%8E%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1><span id="yi-diao-shi-liu-cheng-gai-lan">一、 调试流程概览</span><a href="#yi-diao-shi-liu-cheng-gai-lan" class="header-anchor">#</a></h1><table><thead><tr><th align="left">步骤</th><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><strong>1. 编译带调试信息</strong></td><td align="left"><code>g++ -g program.cpp -o program</code></td><td align="left">生成包含调试信息的可执行文件</td></tr><tr><td align="left"><strong>2. 启动调试器</strong></td><td align="left"><code>gdb program.exe</code></td><td align="left">启动 GDB 并加载程序</td></tr><tr><td align="left"><strong>3. 设置断点</strong></td><td align="left"><code>break main</code> 或 <code>b 15</code></td><td align="left">在函数或行号设置断点</td></tr><tr><td align="left"><strong>4. 运行程序</strong></td><td align="left"><code>run</code></td><td align="left">开始执行程序</td></tr><tr><td align="left"><strong>5. 控制执行</strong></td><td align="left"><code>next</code>, <code>step</code>, <code>continue</code></td><td align="left">单步执行或继续</td></tr><tr><td align="left"><strong>6. 检查变量</strong></td><td align="left"><code>print variable</code></td><td align="left">查看变量值</td></tr><tr><td align="left"><strong>7. 退出调试</strong></td><td align="left"><code>quit</code></td><td align="left">退出 GDB</td></tr></tbody></table><hr><h2><span id="xiang-xi-diao-shi-bu-zou">详细调试步骤</span><a href="#xiang-xi-diao-shi-bu-zou" class="header-anchor">#</a></h2><h3><span id="1-bian-yi-dai-diao-shi-xin-xi-de-cheng-xu">1. 编译带调试信息的程序</span><a href="#1-bian-yi-dai-diao-shi-xin-xi-de-cheng-xu" class="header-anchor">#</a></h3><p>首先使用 <code>-g</code> 选项编译，生成包含调试信息的可执行文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本编译（包含调试信息）</span></span><br><span class="line">g++ -g main.cpp -o main.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推荐编译选项（调试版本）</span></span><br><span class="line">g++ -g -O0 -Wall -Wextra -std=c++17 main.cpp -o main.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有多个源文件</span></span><br><span class="line">g++ -g -O0 *.cpp -o program.exe</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>编译选项说明：</strong></p><ul><li><code>-g</code>：生成调试信息</li><li><code>-O0</code>：关闭优化（调试时必需，防止代码乱跳）</li><li><code>-Wall -Wextra</code>：显示所有警告</li><li><code>-std=c++17</code>：使用 C++17 标准</li></ul><h3><span id="2-qi-dong-gdb-diao-shi-qi">2. 启动 GDB 调试器</span><a href="#2-qi-dong-gdb-diao-shi-qi" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式 1：启动 GDB 并直接加载程序</span></span><br><span class="line">gdb main.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式 2：先启动 GDB，再手动加载程序</span></span><br><span class="line">gdb</span><br><span class="line">(gdb) file main.exe</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3><span id="3-ji-ben-diao-shi-ming-ling">3. 基本调试命令</span><a href="#3-ji-ben-diao-shi-ming-ling" class="header-anchor">#</a></h3><h4><span id="she-zhi-duan-dian-breakpoints">设置断点 (Breakpoints)</span><a href="#she-zhi-duan-dian-breakpoints" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 在函数入口设置断点</span><br><span class="line">(gdb) break main</span><br><span class="line">(gdb) b main</span><br><span class="line"></span><br><span class="line"># 在特定行号设置断点</span><br><span class="line">(gdb) break 15</span><br><span class="line">(gdb) b 15</span><br><span class="line"></span><br><span class="line"># 在特定文件的特定行设置断点</span><br><span class="line">(gdb) break main.cpp:20</span><br><span class="line"></span><br><span class="line"># 设置条件断点</span><br><span class="line">(gdb) break 25 if i == 5</span><br><span class="line"></span><br><span class="line"># 查看所有断点</span><br><span class="line">(gdb) info breakpoints</span><br><span class="line"></span><br><span class="line"># 删除断点</span><br><span class="line">(gdb) delete 1        # 删除1号断点</span><br><span class="line">(gdb) d               # 删除所有断点</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4><span id="yun-xing-he-kong-zhi-cheng-xu-zhi-xing">运行和控制程序执行</span><a href="#yun-xing-he-kong-zhi-cheng-xu-zhi-xing" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 运行程序</span><br><span class="line">(gdb) run</span><br><span class="line">(gdb) r</span><br><span class="line"></span><br><span class="line"># 传入命令行参数运行</span><br><span class="line">(gdb) run arg1 arg2</span><br><span class="line"></span><br><span class="line"># 单步执行（Next，不进入函数内部）</span><br><span class="line">(gdb) next</span><br><span class="line">(gdb) n</span><br><span class="line"></span><br><span class="line"># 单步执行（Step，进入函数内部）</span><br><span class="line">(gdb) step</span><br><span class="line">(gdb) s</span><br><span class="line"></span><br><span class="line"># 继续执行到下一个断点</span><br><span class="line">(gdb) continue</span><br><span class="line">(gdb) c</span><br><span class="line"></span><br><span class="line"># 执行完当前函数并返回到调用处</span><br><span class="line">(gdb) finish</span><br><span class="line"></span><br><span class="line"># 直到退出当前循环或到达当前行之后</span><br><span class="line">(gdb) until</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4><span id="cha-kan-he-xiu-gai-bian-liang">查看和修改变量</span><a href="#cha-kan-he-xiu-gai-bian-liang" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 打印变量值</span><br><span class="line">(gdb) print variable</span><br><span class="line">(gdb) p variable</span><br><span class="line"></span><br><span class="line"># 打印表达式或数组成员</span><br><span class="line">(gdb) p i + 5</span><br><span class="line">(gdb) p array[3]</span><br><span class="line">(gdb) p object.member</span><br><span class="line"></span><br><span class="line"># 手动修改变量值（调试逻辑时很有用）</span><br><span class="line">(gdb) set variable i = 10</span><br><span class="line"></span><br><span class="line"># 自动显示变量（每次停顿时都会显示）</span><br><span class="line">(gdb) display variable</span><br><span class="line">(gdb) undisplay 1      # 取消编号为1的自动显示</span><br><span class="line"></span><br><span class="line"># 查看变量类型</span><br><span class="line">(gdb) whatis variable</span><br><span class="line"></span><br><span class="line"># 查看当前作用域的局部变量</span><br><span class="line">(gdb) info locals</span><br><span class="line"></span><br><span class="line"># 查看函数传入参数</span><br><span class="line">(gdb) info args</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4><span id="cha-kan-dai-ma-he-diao-yong-zhan">查看代码和调用栈</span><a href="#cha-kan-dai-ma-he-diao-yong-zhan" class="header-anchor">#</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 查看当前行附近的源代码</span><br><span class="line">(gdb) list</span><br><span class="line">(gdb) l</span><br><span class="line"></span><br><span class="line"># 查看特定位置代码</span><br><span class="line">(gdb) list 15</span><br><span class="line">(gdb) list main</span><br><span class="line"></span><br><span class="line"># 查看调用栈（Backtrace）</span><br><span class="line">(gdb) backtrace</span><br><span class="line">(gdb) bt</span><br><span class="line"></span><br><span class="line"># 查看当前所在的栈帧信息</span><br><span class="line">(gdb) frame</span><br><span class="line">(gdb) info frame</span><br><span class="line"></span><br><span class="line"># 切换到指定的栈帧（用于查看父函数的变量）</span><br><span class="line">(gdb) frame 2</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2><span id="wan-zheng-diao-shi-shi-li">完整调试示例</span><a href="#wan-zheng-diao-shi-shi-li" class="header-anchor">#</a></h2><h3><span id="shi-li-cheng-xu-debug-demo-cpp">示例程序：<code>debug_demo.cpp</code></span><a href="#shi-li-cheng-xu-debug-demo-cpp" class="header-anchor">#</a></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">factorial</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> n * <span class="built_in">factorial</span>(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Calculating factorial sum...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; numbers.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="type">int</span> fact = <span class="built_in">factorial</span>(numbers[i]);</span><br><span class="line">        sum += fact;</span><br><span class="line">        std::cout &lt;&lt; numbers[i] &lt;&lt; <span class="string">&quot;! = &quot;</span> &lt;&lt; fact &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Total sum: &quot;</span> &lt;&lt; sum &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3><span id="diao-shi-hui-hua">调试会话</span><a href="#diao-shi-hui-hua" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 编译</span></span><br><span class="line">g++ -g -O0 -Wall debug_demo.cpp -o debug_demo.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 启动</span></span><br><span class="line">gdb debug_demo.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 常用操作序列</span></span><br><span class="line">(gdb) b main                    <span class="comment"># 断在入口</span></span><br><span class="line">(gdb) b factorial               <span class="comment"># 断在递归函数</span></span><br><span class="line">(gdb) r                         <span class="comment"># 开始跑</span></span><br><span class="line"></span><br><span class="line">(gdb) n                         <span class="comment"># 走一步</span></span><br><span class="line">(gdb) p numbers                 <span class="comment"># 看看 vector 里的东西</span></span><br><span class="line">(gdb) c                         <span class="comment"># 跳到 factorial 断点</span></span><br><span class="line">(gdb) p n                       <span class="comment"># 看看递归参数</span></span><br><span class="line">(gdb) watch <span class="built_in">sum</span>                 <span class="comment"># 监视 sum 变量，变了就停</span></span><br><span class="line">(gdb) c                         <span class="comment"># 继续</span></span><br><span class="line">(gdb) q                         <span class="comment"># 搞定退出</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2><span id="gao-ji-diao-shi">高级调试</span><a href="#gao-ji-diao-shi" class="header-anchor">#</a></h2><h3><span id="tiao-jian-duan-dian-he-guan-cha-dian">条件断点和观察点</span><a href="#tiao-jian-duan-dian-he-guan-cha-dian" class="header-anchor">#</a></h3><ul><li><strong>条件断点</strong>：<code>(gdb) break 15 if i == 3</code></li><li>**观察点 (Watchpoints)**：</li><li><code>watch var</code>：当变量被<strong>写入</strong>时暂停。</li><li><code>rwatch var</code>：当变量被<strong>读取</strong>时暂停。</li><li><code>awatch var</code>：当变量被<strong>读或写</strong>时暂停。</li></ul><h3><span id="duo-xian-cheng-diao-shi">多线程调试</span><a href="#duo-xian-cheng-diao-shi" class="header-anchor">#</a></h3><ul><li><code>info threads</code>：查看所有线程。</li><li><code>thread &lt;ID&gt;</code>：切换到特定线程。</li><li><code>break line thread &lt;ID&gt;</code>：只在特定线程中设置断点。</li></ul><h3><span id="xin-hao-chu-li">信号处理</span><a href="#xin-hao-chu-li" class="header-anchor">#</a></h3><ul><li><code>info signals</code>：查看 GDB 如何处理各种系统信号。</li><li><code>handle SIGINT stop</code>：收到中断信号时停止程序。</li></ul><hr><h2><span id="shi-yong-ming-ling-su-cha">实用命令速查</span><a href="#shi-yong-ming-ling-su-cha" class="header-anchor">#</a></h2><table><thead><tr><th>命令</th><th>简写</th><th>功能</th></tr></thead><tbody><tr><td><code>run</code></td><td><code>r</code></td><td>运行程序</td></tr><tr><td><code>break</code></td><td><code>b</code></td><td>设置断点</td></tr><tr><td><code>next</code></td><td><code>n</code></td><td>单步执行（跳过函数）</td></tr><tr><td><code>step</code></td><td><code>s</code></td><td>单步执行（进入函数）</td></tr><tr><td><code>continue</code></td><td><code>c</code></td><td>继续执行到下个断点</td></tr><tr><td><code>print</code></td><td><code>p</code></td><td>打印变量值</td></tr><tr><td><code>backtrace</code></td><td><code>bt</code></td><td>查看调用栈</td></tr><tr><td><code>list</code></td><td><code>l</code></td><td>查看源代码</td></tr><tr><td><code>info b</code></td><td><code>i b</code></td><td>查看断点列表</td></tr><tr><td><code>delete</code></td><td><code>d</code></td><td>删除断点</td></tr><tr><td><code>quit</code></td><td><code>q</code></td><td>退出 GDB</td></tr></tbody></table><hr><h2><span id="diao-shi-chang-jing">调试场景</span><a href="#diao-shi-chang-jing" class="header-anchor">#</a></h2><h3><span id="1-diao-shi-yi-beng-kui-segment-fault-de-cheng-xu">1. 调试已崩溃 (Segment Fault) 的程序</span><a href="#1-diao-shi-yi-beng-kui-segment-fault-de-cheng-xu" class="header-anchor">#</a></h3><p>利用 Core Dump 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gdb program.exe core.dump</span><br><span class="line">(gdb) bt          <span class="comment"># 直接定位崩溃瞬间的函数调用链</span></span><br><span class="line">(gdb) p *this     <span class="comment"># 查看当时对象的状态</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3><span id="2-diao-shi-zheng-zai-yun-xing-de-cheng-xu">2. 调试正在运行的程序</span><a href="#2-diao-shi-zheng-zai-yun-xing-de-cheng-xu" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 找到进程 PID 后直接附加</span></span><br><span class="line">gdb -p &lt;PID&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者在 GDB 内部附加</span></span><br><span class="line">(gdb) attach &lt;PID&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2><span id="chang-jian-wen-ti-jie-jue">常见问题解决</span><a href="#chang-jian-wen-ti-jie-jue" class="header-anchor">#</a></h2><ul><li><strong>找不到调试信息</strong>：检查 <code>file program.exe</code> 的输出。如果没有 <code>with debug_info</code>，请确认 <code>g++</code> 编译时加了 <code>-g</code>。</li><li>**变量被优化掉 (value optimized out)**：确保编译参数是 <code>-O0</code>。</li><li><strong>No symbol table</strong>：确认没有执行过 <code>strip</code> 命令，该命令会移除所有调试符号。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 开发环境搭建 </tag>
            
            <tag> GDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows下搭建Vscode + Ozone + CubeMX + Arm GNU Toolchain + Makefile STM32开发环境</title>
      <link href="/2026/01/31/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
      <url>/2026/01/31/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h1><span id="yi-an-zhuang-vscode-ozone-he-cubemx">一、 安装Vscode、Ozone和CubeMX</span><a href="#yi-an-zhuang-vscode-ozone-he-cubemx" class="header-anchor">#</a></h1><pre><code>略.</code></pre><h1><span id="er-an-zhuang-arm-gnu-toolchain">二、安装Arm GNU Toolchain</span><a href="#er-an-zhuang-arm-gnu-toolchain" class="header-anchor">#</a></h1><blockquote><p>下载地址：<a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">Arm GNU Toolchain</a></p></blockquote><p><img src="/images/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/image.png"></p><blockquote><p>下载<em><strong>arm-gnu-toolchain-15.2.rel1-mingw-w64-x86_64-arm-none-eabi.msi</strong></em><br>最好安装到D盘，也可以下载.zip，自己设置环境变量</p></blockquote><p><img src="/images/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/e3414f6e3a8749e49cf533b58f6d536c.png"></p><blockquote><p>输入<code>arm-none-eabi-gcc -v</code>看下环境是否设置成功</p></blockquote><p><img src="/images/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/ce9ba859f59b47689e53ca68abd51924.png"></p><h1><span id="san-an-zhuang-chocolatey">三、安装chocolatey</span><a href="#san-an-zhuang-chocolatey" class="header-anchor">#</a></h1><blockquote><p>管理员模式运行PowerShell，然后输入以下代码</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 设置安装目录</span><br><span class="line">[System.Environment]::SetEnvironmentVariable(&#x27;ChocolateyInstall&#x27;, &#x27;D:\Your\ChocolateyPath&#x27;, &#x27;Machine&#x27;)</span><br><span class="line"></span><br><span class="line"># 安装chocolatey</span><br><span class="line">Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(&#x27;https://community.chocolatey.org/install.ps1&#x27;))</span><br></pre></td></tr></table></figure><h1><span id="si-an-zhuang-make">四、安装make</span><a href="#si-an-zhuang-make" class="header-anchor">#</a></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 先设置安装环境</span><br><span class="line">choco config set cacheLocation &quot;D:\ChocolateyCache&quot;</span><br><span class="line">choco config set customInstallLocation &quot;D:\Program Files\chocolatey_install&quot;</span><br><span class="line"></span><br><span class="line"># 安装make</span><br><span class="line">choco install make</span><br></pre></td></tr></table></figure><blockquote><p>设置环境变量<br><img src="/images/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/5481249617604b958ee9b70e912f1084.png"></p></blockquote><blockquote><p>测试make是否安装成功</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 在cmd或者PowerShell中输入</span><br><span class="line">make -v</span><br></pre></td></tr></table></figure><p><img src="/images/Windows%E4%B8%8B%E6%90%AD%E5%BB%BAVscode-Ozone-CubeMX-Arm-GNU-Toolchain-Makefile-STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/7f1c1c9ac95c444687005ea6d76dffcf.png"></p><blockquote><p>至此本教程结束</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> 开发环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2026/01/30/hello-world/"/>
      <url>/2026/01/30/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2><span id="quick-start">Quick Start</span><a href="#quick-start" class="header-anchor">#</a></h2><h3><span id="create-a-new-post">Create a new post</span><a href="#create-a-new-post" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3><span id="run-server">Run server</span><a href="#run-server" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3><span id="generate-static-files">Generate static files</span><a href="#generate-static-files" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3><span id="deploy-to-remote-sites">Deploy to remote sites</span><a href="#deploy-to-remote-sites" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JLink刷固件</title>
      <link href="/2025/03/05/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/"/>
      <url>/2025/03/05/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#jlink-shua-gu-jian-jiao-cheng">JLinK刷固件教程</a><ul><li><a href="#jlink-shua-gu-jian-ji-jie-jue-bao-cuo-ke-long-wen-ti">jlink刷固件及解决报错克隆问题</a><ul><li><a href="#2-ran-hou-da-kai-segger-j-link-v7-22b-wen-jian-jia-zhong-de-j-flash-lite-v7-22b">2.然后打开SEGGER . J-Link v7.22b文件夹中的J-Flash Lite v7.22b</a></li><li><a href="#3-di-yi-bu-dian-ji-hong-se-jian-tou-chu-de-san-ge-dian-xuan-ze-jlink-gu-jian-ob-stm32-v754-addr-0x8000000-change-date-to-to-30-02-02-licensed-cbt6-128k-use-hex">3.第一步点击红色箭头处的三个点，选择jlink固件&#x2F;OB-STM32_V754_Addr-0x8000000_Change date to  to 30-02-02(Licensed-CBT6-128K_USE).hex</a></li><li><a href="#4-shao-xie-wan-cheng-hou-da-kai-jlink-zhi-gu-jian-jiao-cheng-jie-jue-bao-cuo-dao-ban-ke-long-segger-j-link-v7-22b-j-link-comander-v7-22b">4.烧写完成后打开jlink制固件教程（解诀报错盗版克隆）\SEGGER - J-Link v7.22b\J-Link Comander v7.22b</a></li><li><a href="#5-zui-hou-jiu-shi-shu-ru-license">5.最后就是输入license</a></li></ul></li></ul></li><li><a href="#jlink-ti-qu-gu-jian-jiao-cheng">JLink提取固件教程</a></li><li><a href="#fu-lu">附录</a></li></ul><!-- tocstop --></div><h1><span id="jlink-shua-gu-jian-jiao-cheng">JLinK刷固件教程</span><a href="#jlink-shua-gu-jian-jiao-cheng" class="header-anchor">#</a></h1><p>解决市面上购买到的盗版jlink使用Ozone时的报错问题（采用重刷固件及添加License的方式）</p><ul><li><em><strong>需要准备一个能正常使用的jlink(提示盗版的也可以)</strong></em></li></ul><h2><span id="jlink-shua-gu-jian-ji-jie-jue-bao-cuo-ke-long-wen-ti">jlink刷固件及解决报错克隆问题</span><a href="#jlink-shua-gu-jian-ji-jie-jue-bao-cuo-ke-long-wen-ti" class="header-anchor">#</a></h2><p>1.首先将jlink与被刷入的jlink连接</p><p><img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink(1).jpg" alt="jlink"></p><p>3.3 -&gt; 3.3</p><p>GND -&gt; GND</p><p>SWCLK -&gt;C</p><p>SWDIO -&gt;D</p><h3><span id="2-ran-hou-da-kai-segger-j-link-v7-22b-wen-jian-jia-zhong-de-j-flash-lite-v7-22b">2.然后打开SEGGER . J-Link v7.22b文件夹中的J-Flash Lite v7.22b</span><a href="#2-ran-hou-da-kai-segger-j-link-v7-22b-wen-jian-jia-zhong-de-j-flash-lite-v7-22b" class="header-anchor">#</a></h3><p> <img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink(5).png" alt="jlink"></p><p>device是你的jlink中间的芯片的型号，我的是stm32f103。其他的与图片上一致即可，按OK进入烧写。</p><h3><span id="3-di-yi-bu-dian-ji-hong-se-jian-tou-chu-de-san-ge-dian-xuan-ze-jlink-gu-jian-x2f-ob-stm32-v754-addr-0x8000000-change-date-to-to-30-02-02-licensed-cbt6-128k-use-hex">3.第一步点击红色箭头处的三个点，选择jlink固件&#x2F;OB-STM32_V754_Addr-0x8000000_Change date to  to 30-02-02(Licensed-CBT6-128K_USE).hex</span><a href="#3-di-yi-bu-dian-ji-hong-se-jian-tou-chu-de-san-ge-dian-xuan-ze-jlink-gu-jian-x2f-ob-stm32-v754-addr-0x8000000-change-date-to-to-30-02-02-licensed-cbt6-128k-use-hex" class="header-anchor">#</a></h3><blockquote><p>0B-STN32 V754 Addr-ox000000 _Change date to to 30-02-02（Licensed-CBT6-128K_USE）.hex  支持的是128KB的MCU</p></blockquote><blockquote><p>&#x2F;jlink固件&#x2F;JLink_ARM_OB-64KB.hex 支持的是64KB的MCU</p></blockquote><p><strong>根据MCU选择固件</strong></p><p>第二步点击黄色箭头的erase Chip（擦除芯片的flash）</p><p>第三步点击黑色箭头的program device （烧写固件）</p><p><img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink(6).png" alt="jLink"></p><h3><span id="4-shao-xie-wan-cheng-hou-da-kai-jlink-zhi-gu-jian-jiao-cheng-jie-jue-bao-cuo-dao-ban-ke-long-segger-j-link-v7-22b-j-link-comander-v7-22b">4.烧写完成后打开jlink制固件教程（解诀报错盗版克隆）\SEGGER - J-Link v7.22b\J-Link Comander v7.22b</span><a href="#4-shao-xie-wan-cheng-hou-da-kai-jlink-zhi-gu-jian-jiao-cheng-jie-jue-bao-cuo-dao-ban-ke-long-segger-j-link-v7-22b-j-link-comander-v7-22b" class="header-anchor">#</a></h3><p><img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink%EF%BC%883%EF%BC%89.png" alt="jlink"></p><p>首次打开S&#x2F;N可能为-1，这时就需要修改S&#x2F;N.</p><p>打开jlink刷固件教程（解决报错盗版克隆）\JLink_v61zjJLink.exe</p><p>输入图中命令即可修改，建议S&#x2F;N为八位数       </p><p><img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink(4).png" alt="jlink"></p><h3><span id="5-zui-hou-jiu-shi-shu-ru-license">5.最后就是输入license</span><a href="#5-zui-hou-jiu-shi-shu-ru-license" class="header-anchor">#</a></h3><p><img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink(2).jpg" alt="jlink"></p><h1><span id="jlink-ti-qu-gu-jian-jiao-cheng">JLink提取固件教程</span><a href="#jlink-ti-qu-gu-jian-jiao-cheng" class="header-anchor">#</a></h1><p><em><strong>详细教程待完善</strong></em></p><blockquote><p>注意事项</p><ol><li>序列号不能为黑名单里面的那几个。此条不重要，因为没人去用那些特殊序列号</li><li>新型号不能内置GDBFull，有了直接报错。所有型号不能内置RDDI，有了直接报错</li><li>硬件版本v9~v11并且序列号开头为26,5,82的，和版本号v1并且序列号开头为80的，不许内置JFlash或RDI特性</li></ol></blockquote><p><img src="/images/JLink%E5%88%B7%E5%9B%BA%E4%BB%B6/jlink-cmd.png" alt="J-Link-OB-STM32F072-CortexM___firmware_2020(delet-RDDI).bin"></p><h1><span id="fu-lu">附录</span><a href="#fu-lu" class="header-anchor">#</a></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">exec setsn=20090928//设置下载器SN码，下载器制作好时默认-1，需手动更改且只能更改一次</span><br><span class="line">                            //SN码根据自己喜好设置</span><br><span class="line">                            //下面为下载器需要的许可证</span><br><span class="line">exec addfeature RDI//添加RDI</span><br><span class="line">exec addfeature FlashDL//添加FlashDL</span><br><span class="line">exec addfeature FlashBP  //添加FlashBP</span><br><span class="line">exec addfeature JFlash//添加JFlash</span><br><span class="line">exec addfeature GDBFull//添加GDB</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu下的STM32开发环境搭建(Vscode + CubeMX + Ozone)</title>
      <link href="/2025/02/26/Ubuntu%E4%B8%8B%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-Vscode-CubeMX-Ozone/"/>
      <url>/2025/02/26/Ubuntu%E4%B8%8B%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-Vscode-CubeMX-Ozone/</url>
      
        <content type="html"><![CDATA[<h1><span id="ubuntu-xi-tong-da-jian-vscode-cubemx-ozone-qian-ru-shi-kai-fa-huan-jing">Ubuntu系统搭建Vscode + CubeMx + Ozone嵌入式开发环境</span><a href="#ubuntu-xi-tong-da-jian-vscode-cubemx-ozone-qian-ru-shi-kai-fa-huan-jing" class="header-anchor">#</a></h1><hr><h2><span id="yi-huan-yuan">一、换源</span><a href="#yi-huan-yuan" class="header-anchor">#</a></h2><h3><span id="1-bei-fen-yuan-lie-biao">1. <strong>备份源列表</strong></span><a href="#1-bei-fen-yuan-lie-biao" class="header-anchor">#</a></h3><p>   <code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></p><h3><span id="2-ming-ling-xing-da-kai-source-list-wen-jian">2. <strong>命令行打开source.list文件</strong></span><a href="#2-ming-ling-xing-da-kai-source-list-wen-jian" class="header-anchor">#</a></h3><p>   <code>sudo gedit /etc/apt/sources.list</code></p><h3><span id="3-xiu-gai-source-list-wen-jian-geng-huan-yuan">3. <strong>修改source.list文件，更换源</strong></span><a href="#3-xiu-gai-source-list-wen-jian-geng-huan-yuan" class="header-anchor">#</a></h3><blockquote><p>我个人更推荐使用中科大源</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#  中科大镜像源</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 清华镜像源</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#  阿里镜像源</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure><h3><span id="4-geng-xin-yuan">4. 更新源</span><a href="#4-geng-xin-yuan" class="header-anchor">#</a></h3><p><code>sudo apt-get update</code></p><hr><h2><span id="er-pei-zhi-c-x2f-c-huan-jing">二、配置C&#x2F;C++环境</span><a href="#er-pei-zhi-c-x2f-c-huan-jing" class="header-anchor">#</a></h2><h3><span id="1-an-zhuang-gcc-he-g">1. 安装gcc和g++</span><a href="#1-an-zhuang-gcc-he-g" class="header-anchor">#</a></h3><p><code>sudo apt install gcc g++</code></p><h3><span id="2-yan-zheng-an-zhuang">2. 验证安装</span><a href="#2-yan-zheng-an-zhuang" class="header-anchor">#</a></h3><p><code>gcc -v</code></p><p>如果安装成功，会出现如下类似信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rmer@rmer-Legion-Y7000P-IRH8:~$ gcc -v</span><br><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=gcc</span><br><span class="line">COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper</span><br><span class="line">OFFLOAD_TARGET_NAMES=nvptx-none:amdgcn-amdhsa</span><br><span class="line">OFFLOAD_TARGET_DEFAULT=1</span><br><span class="line">Target: x86_64-linux-gnu</span><br><span class="line">Configured with: ../src/configure -v --with-pkgversion=&#x27;Ubuntu 11.4.0-1ubuntu1~22.04&#x27; --with-bugurl=file:///usr/share/doc/gcc-11/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++,m2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-11 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --enable-default-pie --with-system-zlib --enable-libphobos-checking=release --with-target-system-zlib=auto --enable-objc-gc=auto --enable-multiarch --disable-werror --enable-cet --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-nvptx/usr,amdgcn-amdhsa=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-gcn/usr --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu --with-build-config=bootstrap-lto-lean --enable-link-serialization=2</span><br><span class="line">Thread model: posix</span><br><span class="line">Supported LTO compression algorithms: zlib zstd</span><br><span class="line">gcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04) </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>g++ -v</code></p><p>g++安装成功后，输出信息类似</p><h2><span id="san-an-zhuang-arm-none-eabi-gcc-jiao-cha-bian-yi-gong-ju-lian">三、 安装arm-none-eabi-gcc交叉编译工具链</span><a href="#san-an-zhuang-arm-none-eabi-gcc-jiao-cha-bian-yi-gong-ju-lian" class="header-anchor">#</a></h2><h3><span id="1-guan-wang-xia-zai">1. 官网下载</span><a href="#1-guan-wang-xia-zai" class="header-anchor">#</a></h3><p><a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads</a></p><p><img src="/images/Ubuntu%E4%B8%8B%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-Vscode-CubeMX-Ozone/2025-02-26-00-01-51.png" alt="arm-gnu-toolchain-14.2.rel1-x86_64-arm-none-eabi.tar.xz"></p><p>下载 <strong>arm-gnu-toolchain-14.2.rel1-x86_64-arm-none-eabi.tar.xz</strong></p><h3><span id="2-jie-ya">2. 解压</span><a href="#2-jie-ya" class="header-anchor">#</a></h3><p>进入下载的目录，执行解压命令,这里我指定解压到了 <em><strong>&#x2F;usr&#x2F;loacl</strong></em> 目录。若想解压到其他目录，修改命令行末尾的解压路径即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rmer@rmer-Legion-Y7000P-IRH8:~/下载$</span><br><span class="line"></span><br><span class="line">sudo tar -xJvf arm-gnu-toolchain-14.2.rel1-x86_64-arm-none-eabi.tar.xz -C /usr/local</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3><span id="3-pei-zhi-huan-jing">3. 配置环境</span><a href="#3-pei-zhi-huan-jing" class="header-anchor">#</a></h3><p>修改&#x2F;etc&#x2F;profile文件, 在最后面添加export PATH&#x3D;$PATH:+上面的绝对路径，目的是将交叉编译器的命令添加到全局变量</p><p>输入：</p><p><code>sudo gedit /etc/profile</code></p><p>然后在文件末尾添加如下语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/arm-gnu-toolchain-14.2.rel1-x86_64-arm-none-eabi/bin</span><br></pre></td></tr></table></figure><p><img src="/images/Ubuntu%E4%B8%8B%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-Vscode-CubeMX-Ozone/2025-02-25-23-46-08.png" alt="profile"></p><p>保存并退出之后，执行以下命令使环境变量生效</p><p><code>source /etc/profile</code></p><p>再输入</p><p><code>arm-none-eabi-gcc -v</code></p><p>验证是否安装成功</p><p><img src="/images/Ubuntu%E4%B8%8B%E7%9A%84STM32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-Vscode-CubeMX-Ozone/2025-02-26-00-19-26.png" alt="arm-none-eabi-gcc -v"></p><p><strong>[注意]</strong> source之后只会在当前终端生效, 重启后才会一直生效</p><hr><h2><span id="fang-fa-er">方法二、</span><a href="#fang-fa-er" class="header-anchor">#</a></h2><p>似乎可以直接命令行下载</p><p><code>sudo apt install gcc-arm-none-eabi</code></p><hr><p><strong>至此本教程结束，关于JLINK、Ozone以及CubeMX如何下载，本文不过多赘述</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> 开发环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32时钟体系、SetSysClock、PLL、时钟源</title>
      <link href="/2025/01/11/STM32%E6%97%B6%E9%92%9F%E4%BD%93%E7%B3%BB%E3%80%81SetSysClock%E3%80%81PLL%E3%80%81%E6%97%B6%E9%92%9F%E6%BA%90/"/>
      <url>/2025/01/11/STM32%E6%97%B6%E9%92%9F%E4%BD%93%E7%B3%BB%E3%80%81SetSysClock%E3%80%81PLL%E3%80%81%E6%97%B6%E9%92%9F%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p><em><strong>目录</strong></em></p><div class="toc"><!-- toc --><ul><li><a href="#yi-shi-zhong-ti-xi">一、时钟体系</a><ul><li><a href="#1-can-kao-shou-ce">1、参考手册</a></li><li><a href="#2-shi-zhong-yuan">2、时钟源</a></li><li><a href="#3-shi-zhong-shu">3、时钟树</a></li></ul></li></ul><!-- tocstop --></div><!-- * [一、时钟体系](#一时钟体系)     * [1、参考手册](#1参考手册)    * [2、时钟源](#2时钟源)    * [3、时钟树](#3时钟树)    * [4. 时钟详解](#4-时钟详解)        * [HSE时钟](#hse时钟)        * [锁相环时钟](#锁相环时钟)        * [系统时钟](#系统时钟)        * [HCLK时钟](#hclk时钟)        * [PCLK1时钟](#pclk1时钟)        * [PCLK2时钟](#pclk2时钟)        * [RTC时钟](#rtc时钟)        * [独立看门狗时钟：](#独立看门狗时钟)        * [I2S时钟：](#i2s时钟)        * [以太网PHY时钟：](#以太网phy时钟)        * [USB PHY时钟：](#usb-phy时钟)        * [MCO时钟输出](#mco时钟输出)    * [系统时钟配置函数SetSysClock()](#系统时钟配置函数setsysclock)    * [系统时钟配置流程](#系统时钟配置流程)* [二、PLL](#二pll)  * [2.1 概述](#21-概述)  * [2.2 基本组成](#22-基本组成)  * [2.3 类比说明](#23-类比说明)  * [2.3 相位差\[拓展\]](#23-相位差拓展)* [三、SystemInit系统初始化函数](#三systeminit系统初始化函数)  * [1.第一个执行的文件是汇编文件](#1第一个执行的文件是汇编文件)  * [2.初始化Flash接口，更新PLL系统频率](#2初始化flash接口更新pll系统频率)  * [3.调用SetSysClock函数设置PLL时钟，然后进行分频](#3调用setsysclock函数设置pll时钟然后进行分频)  * [4.阅读system\_stm32f4xx.c文件的头部注释](#4阅读system_stm32f4xxc文件的头部注释)* [**四、时钟源**](#四时钟源)* [参考文章](#参考文章) --><h1><span id="yi-shi-zhong-ti-xi">一、时钟体系</span><a href="#yi-shi-zhong-ti-xi" class="header-anchor">#</a></h1><p>为单片机提供一个时钟信号（非常稳定），该信号可以用于各种时钟域的同步，包括系统时钟、HCLK、PCLK1、PCLK2、I2S时钟、USB PHY时钟、以太网PHY时钟等。<br>STM32的<mark style="background-color:yellow;">时钟系统由外部晶振、PLL（锁相环）和内部 RC 振荡器组成</mark></p><p>其作用包括：</p><ul><li>为处理器提供准确的时钟信号，保证处理器、总线和外设的正确工作。</li><li><mark style="background-color:yellow;">通过 PLL 的倍频功能</mark>，产生多种频率的时钟信号，满足不同外设的时钟需求。</li><li>通过时钟系统提供的时钟分频器、预分频器等功能，进一步调整时钟频率，以适应不同的应用场景。</li></ul><p><em><strong>时钟系统在 STM32 的系统中扮演着关键的角色，它的稳定性和精度对整个系统的性能影响很大</strong></em></p><h2><span id="1-can-kao-shou-ce">1、参考手册</span><a href="#1-can-kao-shou-ce" class="header-anchor">#</a></h2><p><code style="color: red;">STM32F4xx 中文参考手册.pdf 第 106 页</code></p><h2><span id="2-shi-zhong-yuan">2、时钟源</span><a href="#2-shi-zhong-yuan" class="header-anchor">#</a></h2><p>STM32F407IG可以使用三种不同的时钟源来驱动*系统时钟 (SYSCLK)*，CPU 运行的最高频率为 168MHz。</p><ul><li><p><em><strong>HSI（High-Speed Internal）振荡器时钟</strong></em>：内部高速时钟源，适用于简单、低功耗的应用，但如果需要更高的时钟精度或更快的时钟频率，可以选择外部晶振或通过PLL来调整时钟频率。</p></li><li><p><em><strong>HSE（High-Speed External）振荡器时钟</strong></em>： 高速外部时钟源 16MHz-32.768MHz，用于高速、高精度的应用。</p></li><li><p><em><strong>主 PLL (PLL) 时钟</strong></em>：主PLL主要通过倍频技术将较低频率的输入时钟（如HSE或HSI）转化为更高频率的输出时钟。例如，PLL可以将一个16 MHz的HSE时钟信号通过配置倍频因子输出更高的频率（例如，32 MHz、48 MHz等），为系统提供所需的高精度、高频时钟。</p><ul><li><em><strong>32 kHZ 低速内部 RC（LSI RC）</strong></em>：LSI 是一个内部的低速 RC 振荡器，通常在 32 MHz 频率下工作。LSI 可以驱动独立看门狗（IWDG），确保系统在发生故障时可以被复位。此外，LSI 还可以提供给RTC（实时时钟）用于 停机 或者 待机模式下的自动唤醒。</li><li><em><strong>32.768 kHz 低速外部晶振（LSE 晶振）</strong></em>： LSE 是一个低频外部晶振，通常为 32.768 kHz。它主要用于驱动 RTC 时钟（RTCCLK），提供精确的时钟信号以支持系统的时间跟踪功能，尤其在长时间运行和电池供电应用中非常重要。</li></ul></li></ul><p><em>STM32 微控制器支持在不需要时关闭不必要的时钟源，以进一步降低功耗。这些次级时钟源（LSI 和 LSE）都可以根据应用的需求单独启用或禁用。例如：</em></p><ul><li><strong>禁用</strong> LSI 或 LSE：如果不需要低速时钟源，用户可以禁用它们，以节省功耗。</li><li><strong>启用</strong> LSI 或 LSE：如果系统进入待机模式或需要 RTC 时钟工作，用户可以启用相应的时钟源。</li></ul><h2><span id="3-shi-zhong-shu">3、时钟树</span><a href="#3-shi-zhong-shu" class="header-anchor">#</a></h2><p>STM32F407IG 时钟树如下图所示：</p><p><img src="/images/STM32%E6%97%B6%E9%92%9F%E4%BD%93%E7%B3%BB/%E6%97%B6%E9%92%9F%E6%A0%91.png" alt="时钟树"></p><hr><p>—————持续更新中—————</p>]]></content>
      
      
      <categories>
          
          <category> STM32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STM32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RoboMaster</title>
      <link href="/2025/01/02/RoboMaster/"/>
      <url>/2025/01/02/RoboMaster/</url>
      
        <content type="html"><![CDATA[<h2><span id="rmuc-zong-jue-sai-shen-zhen-chun-chong">RMUC总决赛  深圳-春茧</span><a href="#rmuc-zong-jue-sai-shen-zhen-chun-chong" class="header-anchor">#</a></h2><p><img src="/images/rm%E8%88%9E%E5%8F%B0.jpg"></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
